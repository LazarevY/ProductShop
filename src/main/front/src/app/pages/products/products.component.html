<app-header></app-header>
<main class="bg-light gf-main-container" style="height: auto">
  <div style="height: 15vh;"></div>


  <section class="py-5 container ">
    <h1 class="gf-text-color-main font-weight-bold">Товары</h1>
    <div class=""></div>
    <div class="row my-5 bg-light">

      <div class="col-4" [formGroup]="productFilterForm">
        <h2 class="py-3">Фильтры</h2>
        <div>
          <input type="text" placeholder="Название" formControlName="namePattern">
        </div>
        <div>
          <button class="btn" type="button" data-toggle="collapse" data-target="#categoryCollapse" aria-expanded="false"
                  aria-controls="categoryCollapse">
            <h4>Категории</h4>
          </button>
        </div>
        <div class="collapse" id="categoryCollapse">
          <div  *ngFor="let c of categories">
            <input class="form-check-input" *ngIf="categoriesChecks.get(c.id); else elseBlock" type="checkbox"  id="ctg{{c.id}}" (change)="categoryCheckEvent(c.id)" checked>
            <ng-template #elseBlock>
              <input class="form-check-input" type="checkbox"  id="ctg{{c.id}}" (change)="categoryCheckEvent(c.id)">
            </ng-template>
            <label class="form-check-label" for="ctg{{c.id}}">
              {{c.name}}
            </label>
          </div>
        </div>
        <div>
          <button class="btn" type="button" data-toggle="collapse" data-target="#priceCollapse" aria-expanded="false"
                  aria-controls="priceCollapse">
            <h4>Цена</h4>
          </button>
        </div>
        <div class="collapse" id="priceCollapse">
          <div>
            <label for="customRange2" class="form-label">От: <input type="number" [value]="productFilterForm.value.priceLow" formControlName="priceLow">р</label>
            <br>
            <input type="range" class="form-range" min="0" [max]="productFilterForm.value.priceHigh" id="customRange2" formControlName="priceLow">
          </div>
          <div>
            <label for="customRange" class="form-label">До: <input type="number" [value]="productFilterForm.value.priceHigh" formControlName="priceHigh">р</label>
            <br>
            <input type="range" class="form-range" [min]="productFilterForm.value.priceLow" max="3000" id="customRange" formControlName="priceHigh">
          </div>
        </div>
        <div>
          <button class="btn gf-bg-cmp text-light" (click)="getProducts()">Применить</button>
        </div>
      </div>
      <div class="col-8">
        <div class="container bootstrap snipets">
          <div class="row flow-offset-1">
            <div class="col-xs-6 col-md-4 py-1" *ngFor="let pr of products">
              <div class="card">
                <app-product-card [product]="pr"></app-product-card>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
<app-footer></app-footer>
